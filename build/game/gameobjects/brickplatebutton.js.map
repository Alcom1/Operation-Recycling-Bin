{
  "version": 3,
  "sources": ["C:\\Users\\Alcom\\Desktop\\Dev\\Git\\Operation Recycling Bin\\src\\game\\gameobjects\\brickplatebutton.ts"],
  "sourcesContent": ["import { Collider } from \"engine/modules/collision\";\r\nimport BrickPlate, { BrickPlateParams } from \"./brickplate\";\r\n\r\nconst brickButtonOverride = Object.freeze({\r\n    images : [\"brick_button_off\", \"brick_button_on\"],\r\n    width : 2\r\n});\r\n\r\nexport default class BrickPlateButton extends BrickPlate {\r\n    \r\n    plates: BrickPlate[] = [];\r\n    private timer : number = 0;\r\n    private waitDuration : number = 1.5;\r\n\r\n    constructor(params: BrickPlateParams) {\r\n        super(Object.assign(params, brickButtonOverride));\r\n    }\r\n\r\n    public init() {\r\n\r\n        //Get plates affected by this button (also includes self?)\r\n        this.plates = (this.engine.tag.get(\r\n            \"BrickPlate\", \r\n            \"Level\") as BrickPlate[]).filter(p => p.circuit == this.circuit);\r\n    }\r\n\r\n    //Update timer\r\n    public update(dt: number) {\r\n        \r\n        this.timer = this.timer > 0 ? this.timer - dt : 0;\r\n    }\r\n\r\n    //Get hazard and passive colliders of this brick.\r\n    public getColliders() : Collider[] {\r\n\r\n        //Combine with passive collider from base class\r\n        return super.getColliders().concat([{\r\n            mask : 0b10000000,  //Button\r\n            min : this.gpos.getAdd({ x : 0,          y : -1}),\r\n            max : this.gpos.getAdd({ x : this.width, y :  0}) \r\n        }]);\r\n    }\r\n    \r\n    //Flip\r\n    public resolveCollision(mask : number) {\r\n\r\n        //Turn off\r\n        if (this.timer <= 0 && mask & 0b10000000) {\r\n            this.setOnOff(!this.isOn);\r\n            this.plates.forEach(p => p.setOnOff(this.isOn));\r\n            this.timer = this.waitDuration;\r\n        }\r\n    }\r\n}\r\n"],
  "mappings": "AACA;AAEA,MAAM,sBAAsB,OAAO,OAAO;AAAA,EACtC,QAAS,CAAC,oBAAoB;AAAA,EAC9B,OAAQ;AAAA;AALZ,8CAQ8C;AAAA,EAM1C;AACI,UAAM,OAAO,OAAO,QAAQ;AALhC,kBAAuB;AACf,iBAAiB;AACjB,wBAAwB;AAAA;AAAA,EAMzB;AAGH,SAAK,SAAU,KAAK,OAAO,IAAI,IAC3B,cACA,SAA0B,OAAO,OAAK,EAAE,WAAW,KAAK;AAAA;AAAA,EAIzD;AAEH,SAAK,QAAQ,KAAK,QAAQ,IAAI,KAAK,QAAQ,KAAK;AAAA;AAAA,EAI7C;AAGH,WAAO,MAAM,eAAe,OAAO,CAAC;AAAA,MAChC,MAAO;AAAA,MACP,KAAM,KAAK,KAAK,OAAO,CAAE,GAAI,GAAY,GAAI;AAAA,MAC7C,KAAM,KAAK,KAAK,OAAO,CAAE,GAAI,KAAK,OAAO,GAAK;AAAA;AAAA;AAAA,EAK/C;AAGH,QAAI,KAAK,SAAS,KAAK,OAAO;AAC1B,WAAK,SAAS,CAAC,KAAK;AACpB,WAAK,OAAO,QAAQ,OAAK,EAAE,SAAS,KAAK;AACzC,WAAK,QAAQ,KAAK;AAAA;AAAA;AAAA;",
  "names": []
}
