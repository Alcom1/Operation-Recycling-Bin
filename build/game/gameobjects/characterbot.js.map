{
  "version": 3,
  "sources": ["C:\\Users\\Alcom\\Desktop\\Dev\\Git\\Operation Recycling Bin\\src\\game\\gameobjects\\characterbot.ts"],
  "sourcesContent": ["import Engine from \"engine/engine\";\r\nimport Character, { CharacterParams } from \"./character\";\r\nimport { BOUNDARY, GMULTX, GMULTY, bitStack } from \"engine/utilities/math\";\r\nimport Vect from \"engine/utilities/vect\";\r\nimport { GameObjectParams } from \"engine/gameobjects/gameobject\";\r\n\r\nconst characterBotOverride = Object.freeze({\r\n    speed : 2.5\r\n});\r\n\r\nconst cbc = Object.freeze({\r\n    flor : bitStack([0, 7]),\r\n    down : bitStack([1, 8]),\r\n    ceil : bitStack([2]),\r\n    head : bitStack([3]),\r\n    wall : bitStack([4, 5]),\r\n    step : bitStack([6])\r\n});\r\n\r\nexport default class CharacterBot extends Character {\r\n\r\n    private sceneName: string | null = null;\r\n\r\n    public init(ctx: CanvasRenderingContext2D): void {\r\n        super.init(ctx);\r\n    }\r\n\r\n    constructor(engine: Engine, params: GameObjectParams) {\r\n        super(engine, Object.assign(params, characterBotOverride) as CharacterParams);\r\n    }\r\n\r\n    protected handleCollision() {\r\n\r\n        //Collision bitmask\r\n        let cbm = this.brickHandler.checkCollisionSuper(\r\n            this.gpos.getSub(new Vect(this.move.x > 0 ? 1 : 0, 5)),   //Position\r\n            5,                                                        // n + 1\r\n            14,                                                       //(n + 3) * 2\r\n            7,                                                        // n + 3\r\n            this.move.x);                                             //Direction\r\n\r\n        // var qq = \"\"\r\n\r\n        // for(let i = 0; i < 8; i++) {\r\n        //     if(cbm & 1 << i) {\r\n        //         qq += i + \" \";\r\n        //     }\r\n        // }\r\n\r\n        // console.log(qq);\r\n        \r\n        //WALL BOUNDARY\r\n        if(\r\n            this.gpos.x - 1 < BOUNDARY.minx || \r\n            this.gpos.x + 1 > BOUNDARY.maxx) {\r\n\r\n            this.reverse();\r\n        }\r\n        else {\r\n\r\n            //WALL - REVERSE\r\n            if(cbm & cbc.wall) {\r\n                this.reverse();\r\n            }\r\n            //HEAD-WALL - REVERSE\r\n            else if(cbm & cbc.head && cbm & cbc.flor) {\r\n                this.reverse();\r\n            }\r\n            //UP-STEP - GO UP\r\n            else if(cbm & cbc.step) {\r\n\r\n                //BLOCKED BY CEILING\r\n                if(cbm & cbc.ceil || this.gpos.y <= BOUNDARY.miny + 3) {\r\n                    this.reverse();\r\n                }\r\n                else {\r\n                    this.gpos.y -= 1;\r\n                }\r\n            }\r\n            //FLOOR - DO NOTHING\r\n            else if(cbm & cbc.flor) {\r\n\r\n            }\r\n            //DOWN-STEP - GO DOWN\r\n            else if(cbm & cbc.down) {\r\n                this.gpos.y += 1;\r\n            }\r\n            //VOID - REVERSE\r\n            else {\r\n                this.reverse();\r\n            }\r\n        }\r\n    }\r\n\r\n    public draw(ctx: CanvasRenderingContext2D) {\r\n\r\n        ctx.globalAlpha = 0.5;\r\n        ctx.strokeStyle = \"#F00\"\r\n        ctx.lineWidth = 4;\r\n        ctx.strokeRect(\r\n           -GMULTX, \r\n            GMULTY, \r\n            GMULTX * 2, \r\n            GMULTY * -4);\r\n\r\n        ctx.translate(-this.spos.x, 0);\r\n        \r\n        ctx.fillStyle = \"#FF0\"\r\n        ctx.beginPath();\r\n        ctx.moveTo(-GMULTX, GMULTY);\r\n        ctx.lineTo(-GMULTX, GMULTY + GMULTY * -4 + (this.move.x < 0 ? 1 : 0) * GMULTY);\r\n        ctx.lineTo(      0, GMULTY + GMULTY * -4);\r\n        ctx.lineTo( GMULTX, GMULTY + GMULTY * -4 + (this.move.x > 0 ? 1 : 0) * GMULTY);\r\n        ctx.lineTo( GMULTX, GMULTY);\r\n        ctx.fill();\r\n    }\r\n}\r\n"],
  "mappings": "AACA;AACA;AACA;AAGA,MAAM,uBAAuB,OAAO,OAAO;AAAA,EACvC,OAAQ;AAAA;AAGZ,YAAY,OAAO,OAAO;AAAA,EACtB,MAAO,SAAS,CAAC,GAAG;AAAA,EACpB,MAAO,SAAS,CAAC,GAAG;AAAA,EACpB,MAAO,SAAS,CAAC;AAAA,EACjB,MAAO,SAAS,CAAC;AAAA,EACjB,MAAO,SAAS,CAAC,GAAG;AAAA,EACpB,MAAO,SAAS,CAAC;AAAA;AAhBrB,0CAmB0C;AAAA,EAQtC;AACI,UAAM,SAAQ,OAAO,OAAO,QAAQ;AAPhC,qBAA2B;AAAA;AAAA,EAE5B;AACH,UAAM,KAAK;AAAA;AAAA,EAOL;AAGN,cAAU,KAAK,aAAa,oBACxB,KAAK,KAAK,OAAO,IAAI,KAAK,KAAK,KAAK,IAAI,IAAI,IAAI,GAAG,KACnD,GACA,IACA,GACA,KAAK,KAAK;AAad,QACI,KAAK,KAAK,IAAI,IAAI,SAAS,QAC3B,KAAK,KAAK,IAAI,IAAI,SAAS;AAE3B,WAAK;AAAA;AAKL,UAAG,MAAM,IAAI;AACT,aAAK;AAAA,iBAGD,MAAM,IAAI,QAAQ,MAAM,IAAI;AAChC,aAAK;AAAA,iBAGD,MAAM,IAAI;AAGd,YAAG,MAAM,IAAI,QAAQ,KAAK,KAAK,KAAK,SAAS,OAAO;AAChD,eAAK;AAAA;AAGL,eAAK,KAAK,KAAK;AAAA;AAAA,iBAIf,MAAM,IAAI;AAAA,iBAIV,MAAM,IAAI;AACd,aAAK,KAAK,KAAK;AAAA;AAIf,aAAK;AAAA;AAAA;AAAA;AAAA,EAKV;AAEH,QAAI,cAAc;AAClB,QAAI,cAAc;AAClB,QAAI,YAAY;AAChB,QAAI,WACD,CAAC,QACA,QACA,SAAS,GACT,SAAS;AAEb,QAAI,UAAU,CAAC,KAAK,KAAK,GAAG;AAE5B,QAAI,YAAY;AAChB,QAAI;AACJ,QAAI,OAAO,CAAC,QAAQ;AACpB,QAAI,OAAO,CAAC,QAAQ,SAAS,SAAS,KAAM,MAAK,KAAK,IAAI,IAAI,IAAI,KAAK;AACvE,QAAI,OAAa,GAAG,SAAS,SAAS;AACtC,QAAI,OAAQ,QAAQ,SAAS,SAAS,KAAM,MAAK,KAAK,IAAI,IAAI,IAAI,KAAK;AACvE,QAAI,OAAQ,QAAQ;AACpB,QAAI;AAAA;AAAA;",
  "names": []
}
