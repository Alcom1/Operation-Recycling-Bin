{
  "version": 3,
  "sources": ["C:\\Users\\Alcom\\Desktop\\Dev\\Git\\Operation Recycling Bin\\src\\game\\gameobjects\\characterrbg.ts"],
  "sourcesContent": ["import GameObject from \"engine/gameobjects/gameobject\";\r\nimport { Collider } from \"engine/modules/collision\";\r\nimport { bitStack, BOUNDARY, GMULTX, GMULTY, MASKS } from \"engine/utilities/math\";\r\nimport Character, { CharacterParams } from \"./character\";\r\n\r\nconst characterRomGOverride = Object.freeze({\r\n    height: 2,\r\n    speed : 5.0,\r\n    images : [        \r\n        { name : \"char_romg_left\", offsetX : 0 },\r\n        { name : \"char_romg_right\", offsetX : 0}],\r\n    frameCount : 2,\r\n    animsCount : 1,\r\n    isGlide : true\r\n});\r\n\r\n//Collision bitmasks for bot-brick collisions\r\nconst gcb = Object.freeze({\r\n    flor : bitStack([2]),\r\n    face : bitStack([0, 1])\r\n});\r\n\r\nexport default class CharacterRBG extends Character {\r\n\r\n    private other! : GameObject;\r\n\r\n    constructor(params: CharacterParams) {\r\n        super(Object.assign(params, characterRomGOverride));\r\n    }\r\n\r\n    //Check and resolve brick collisions\r\n    protected handleCollision() {\r\n    \r\n        //WALL BOUNDARY\r\n        if (this.gpos.x - 1 < BOUNDARY.minx || \r\n            this.gpos.x + 1 > BOUNDARY.maxx) {\r\n\r\n            this.reverse();\r\n        }\r\n        //Brick collisions\r\n        else {\r\n\r\n            //Collision bitmask\r\n            const cbm = this.brickHandler.checkCollisionRange(\r\n                this.gpos.getSub({\r\n                    x : this.move.x > 0 ? -1 : 2, \r\n                    y : this.height\r\n                }),             //Position\r\n                this.move.x,    //Direction\r\n                0,              //START :  n + 1\r\n                3,              //FINAL : (n + 3) * 2 + 1\r\n                3);             //HEIGHT:  n + 3\r\n\r\n            //\r\n            if(cbm & gcb.face) {\r\n                this.reverse();\r\n            }\r\n            //\r\n            else if(cbm !& gcb.flor) {\r\n\r\n            }\r\n            //VOID - REVERSE\r\n            else {\r\n                this.reverse();\r\n            }\r\n        }\r\n    }\r\n\r\n    //Get bin colliders\r\n    public getColliders() : Collider[] {\r\n\r\n        return [{ \r\n            mask : MASKS.block | MASKS.death | MASKS.enemy,\r\n            min : this.gpos\r\n                .getAdd({ x : -1, y : 1 - this.height})\r\n                .getMult(GMULTX, GMULTY)\r\n                .getAdd(this.spos)\r\n                .getAdd({x : 18, y : 0}),\r\n            max : this.gpos\r\n                .getAdd({ x :  1, y : 1})\r\n                .getMult(GMULTX, GMULTY)\r\n                .getAdd(this.spos),\r\n            isSub : true\r\n        },{ \r\n            mask : 0,   //Passive\r\n            min : this.gpos.getAdd({ x : -1, y : 1 - this.height}),\r\n            max : this.gpos.getAdd({ x :  1, y : 1}) \r\n        }];\r\n    }\r\n\r\n    //Explode\r\n    public resolveCollision(mask : number, other : GameObject) {\r\n\r\n        //Reverse\r\n        if (mask & (MASKS.enemy | MASKS.block)){\r\n\r\n            var targetDir = Math.sign(other.gpos.x - this.gpos.x)   //Direction of the target\r\n            var facingDir = Math.sign(this.move.x);                 //Direction of this's movement  \r\n\r\n            if(targetDir == facingDir) {\r\n                this.reverse();\r\n            }\r\n        }\r\n    }\r\n}"],
  "mappings": "AAEA;AACA;AAEA,MAAM,wBAAwB,OAAO,OAAO;AAAA,EACxC,QAAQ;AAAA,EACR,OAAQ;AAAA,EACR,QAAS;AAAA,IACL,CAAE,MAAO,kBAAkB,SAAU;AAAA,IACrC,CAAE,MAAO,mBAAmB,SAAU;AAAA;AAAA,EAC1C,YAAa;AAAA,EACb,YAAa;AAAA,EACb,SAAU;AAAA;AAId,YAAY,OAAO,OAAO;AAAA,EACtB,MAAO,SAAS,CAAC;AAAA,EACjB,MAAO,SAAS,CAAC,GAAG;AAAA;AAnBxB,0CAsB0C;AAAA,EAItC;AACI,UAAM,OAAO,OAAO,QAAQ;AAAA;AAAA,EAItB;AAGN,QAAI,KAAK,KAAK,IAAI,IAAI,SAAS,QAC3B,KAAK,KAAK,IAAI,IAAI,SAAS;AAE3B,WAAK;AAAA;AAML,kBAAY,KAAK,aAAa,oBAC1B,KAAK,KAAK,OAAO;AAAA,QACb,GAAI,KAAK,KAAK,IAAI,IAAI,KAAK;AAAA,QAC3B,GAAI,KAAK;AAAA,UAEb,KAAK,KAAK,GACV,GACA,GACA;AAGJ,UAAG,MAAM,IAAI;AACT,aAAK;AAAA,iBAGD,MAAO,IAAI;AAAA;AAKf,aAAK;AAAA;AAAA;AAAA;AAAA,EAMV;AAEH,WAAO,CAAC;AAAA,MACJ,MAAO,MAAM,QAAQ,MAAM,QAAQ,MAAM;AAAA,MACzC,KAAM,KAAK,KACN,OAAO,CAAE,GAAI,IAAI,GAAI,IAAI,KAAK,SAC9B,QAAQ,QAAQ,QAChB,OAAO,KAAK,MACZ,OAAO,CAAC,GAAI,IAAI,GAAI;AAAA,MACzB,KAAM,KAAK,KACN,OAAO,CAAE,GAAK,GAAG,GAAI,IACrB,QAAQ,QAAQ,QAChB,OAAO,KAAK;AAAA,MACjB,OAAQ;AAAA,OACV;AAAA,MACE,MAAO;AAAA,MACP,KAAM,KAAK,KAAK,OAAO,CAAE,GAAI,IAAI,GAAI,IAAI,KAAK;AAAA,MAC9C,KAAM,KAAK,KAAK,OAAO,CAAE,GAAK,GAAG,GAAI;AAAA;AAAA;AAAA,EAKtC;AAGH,QAAI,OAAQ,OAAM,QAAQ,MAAM;AAE5B,sBAAgB,KAAK,KAAK,MAAM,KAAK,IAAI,KAAK,KAAK;AACnD,sBAAgB,KAAK,KAAK,KAAK,KAAK;AAEpC,UAAG,aAAa;AACZ,aAAK;AAAA;AAAA;AAAA;AAAA;",
  "names": []
}
