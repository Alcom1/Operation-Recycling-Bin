{
  "version": 3,
  "sources": ["C:\\Users\\Alcom\\Desktop\\Dev\\Git\\Operation Recycling Bin\\src\\engine\\scene\\scene.ts"],
  "sourcesContent": ["import Engine from \"engine/engine\";\r\nimport GameObject from \"engine/gameobjects/gameobject\";\r\nimport { GMULTX, GMULTY } from \"engine/utilities/math\";\r\n\r\nexport interface SceneParams {\r\n    name?: string,\r\n    need?: string[],\r\n    zIndex?: number,\r\n    gameObjects?: GameObject[],\r\n    initialized?: boolean;\r\n}\r\n\r\nexport default class Scene {\r\n    public name: string;\r\n    private need: string[];\r\n    public zIndex: number;\r\n    private gameObjects: GameObject[];\r\n    private initialized: boolean;\r\n\r\n    constructor(\r\n        private engine: Engine,\r\n        {\r\n            name = \"nameless\",\r\n            need = [],\r\n            zIndex = 0,\r\n            gameObjects = [],\r\n            initialized = false\r\n        }: SceneParams\r\n    ) {\r\n        this.name = name;\r\n        // Required scenes for this scene to initialize\r\n        this.need = need;\r\n        this.zIndex = zIndex;\r\n        this.gameObjects = [];\r\n        this.initialized = false;\r\n    }\r\n\r\n    init(ctx: CanvasRenderingContext2D, scenes: Scene[]) {\r\n        \r\n        if (\r\n            !this.initialized && \r\n            this.need.every(n => this.engine.tag.exists(n))\r\n        ) {\r\n\r\n            ctx.save();\r\n                this.gameObjects.forEach(go =>  go.init(ctx, scenes));\r\n            ctx.restore();\r\n\r\n            this.initialized = true;\r\n        }\r\n    }\r\n\r\n    clear() {\r\n        this.gameObjects = []\r\n    }\r\n\r\n    pushGO(gameObject: GameObject) {\r\n        // Establish parent scene before pushing\r\n        gameObject.parent = this;\r\n        this.gameObjects.push(gameObject);\r\n    }\r\n\r\n    sortGO() {\r\n        //Sort game objects by z-index.\r\n        this.gameObjects.sort((a, b) => a.zIndex - b.zIndex);\r\n    }\r\n\r\n    update(dt: number) {\r\n        if(this.initialized) {\r\n            this.gameObjects.forEach(go => { if(!go.isActive) { return; }\r\n                go.update(dt)\r\n            });\r\n        }\r\n    }\r\n\r\n    draw(ctx: CanvasRenderingContext2D) {\r\n        if (this.initialized) {\r\n            this.gameObjects.forEach(go => { if(!go.isActive) { return; }\r\n                ctx.save();\r\n                ctx.translate(\r\n                    go.gpos.x * GMULTX + go.spos.x, \r\n                    go.gpos.y * GMULTY + go.spos.y\r\n                );\r\n                go.draw(ctx);\r\n                ctx.restore();\r\n            });\r\n        }\r\n    } \r\n}\r\n"],
  "mappings": "AAEA;AAFA;AAAA,EAmBI,YACY;AAAA,IAEJ,OAAO;AAAA,IACP,OAAO;AAAA,IACP,SAAS;AAAA,IACT,cAAc;AAAA,IACd,cAAc;AAAA;AANV;AASR,SAAK,OAAO;AAEZ,SAAK,OAAO;AACZ,SAAK,SAAS;AACd,SAAK,cAAc;AACnB,SAAK,cAAc;AAAA;AAAA,EAGvB;AAEI,QACI,CAAC,KAAK,eACN,KAAK,KAAK,MAAM,OAAK,KAAK,OAAO,IAAI,OAAO;AAG5C,UAAI;AACA,WAAK,YAAY,QAAQ,QAAO,GAAG,KAAK,KAAK;AACjD,UAAI;AAEJ,WAAK,cAAc;AAAA;AAAA;AAAA,EAI3B;AACI,SAAK,cAAc;AAAA;AAAA,EAGvB;AAEI,eAAW,SAAS;AACpB,SAAK,YAAY,KAAK;AAAA;AAAA,EAG1B;AAEI,SAAK,YAAY,KAAK,UAAU,EAAE,SAAS,EAAE;AAAA;AAAA,EAGjD;AACI,QAAG,KAAK;AACJ,WAAK,YAAY,QAAQ;AAAQ,YAAG,CAAC,GAAG;AAAY;AAAA;AAChD,WAAG,OAAO;AAAA;AAAA;AAAA;AAAA,EAKtB;AACI,QAAI,KAAK;AACL,WAAK,YAAY,QAAQ;AAAQ,YAAG,CAAC,GAAG;AAAY;AAAA;AAChD,YAAI;AACJ,YAAI,UACA,GAAG,KAAK,IAAI,SAAS,GAAG,KAAK,GAC7B,GAAG,KAAK,IAAI,SAAS,GAAG,KAAK;AAEjC,WAAG,KAAK;AACR,YAAI;AAAA;AAAA;AAAA;AAAA;",
  "names": []
}
